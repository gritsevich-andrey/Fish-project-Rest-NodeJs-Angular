<h1>Список предложенных мест</h1>
<div class="placesList">
  <div *ngFor="let item of userTravels, let i = index">
    <div>
      <span>{{i + 1}} - </span>
      <span>{{item.title}}</span>
    </div>
    <div>
      <a *ngIf="item.isPublic" class="waves-effect waves-light btn" (click)="hideTravel(item._id)">Скрыть</a>
      <a *ngIf="!item.isPublic" class="waves-effect waves-light btn" (click)="showTravel(item._id)">Повторить</a>
      <button class="waves-effect waves-light btn modal-trigger" data-target="editTravel" (click)="openEditTravel(item)" >Редактировать</button>
    </div>
  </div>
</div>
<div class="makeOffer">
  <button data-target="makeOffer"
          matTooltip="Сформировать условия для поездки, дату отправления, стоимость и подробное описание. "
          class="btn modal-trigger">Предложить поездку
  </button>
</div>
<input (change)="setTravelDate($event)" [hidden]="true" type="text" class="datepicker" #datepicker>
<div id="makeOffer" class="modal">
  <div class="mat-form-field-flex">
    <form [formGroup]="form" (ngSubmit)="onSubmit('create')">
      <div class="modal-content">
        <!--        <div class="input-field col s6">-->
        <!--          <input id="travelTitle" disabled [value]="-->
        <!--          form.controls.travelTarget.value === 'tourism' ? 'Туризм' :-->
        <!--          form.controls.travelTarget.value === 'fishing' ? 'Рыбалка' :-->
        <!--          form.controls.travelTarget.value === 'hunting' ? 'Охота' : ''-->
        <!--        " type="text" class="validate" placeholder="Выберите для чего вы хотите отправиться"/>-->
        <!--        </div>-->
        <div>
          <strong>{{form.controls.travelDate.value | date:'dd.MM.yyyy' }}</strong>
          <button (click)="datepicker.click()" class="waves-effect waves-light btn" type="button">Дата поездки</button>
        </div>
        <div>
          <span class="addPhoto">Добавить обложку поездки</span>
          <input (change)="onFileLoad($event)" type="file" [hidden]="true" #inputFile>
          <button class="waves-effect waves-light btn" type="button" (click)="inputFile.click()">Выбрать изображение
          </button>
        </div>
        <div class="input-field">
          <select formControlName="travelType" class="icons" (change)="travelTypeChange()">
            <option value="" disabled selected>Выбрать технику</option>
            <option value="onFoot" class="left">Нет</option>
            <option value="technique" class="left">Выбрать</option>
          </select>
        </div>
        <div *ngIf="isTechnique" class="input-field col s12 m6">
          <select class="browser-default" formControlName="travelTechnique" multiple>
            <!--            <option value="" disabled selected>Выберите технику</option>-->
            <option *ngFor="let transport of transports" value="{{transport.name }}">{{transport.name}}</option>
          </select>
        </div>
        <div class="buttonBlock">
          <span>Куда поехать?</span>
          <button data-target="startPointMap" class="waves-effect waves-light btn modal-trigger">Указать на карте
          </button>
        </div>
        <div class="buttonBlock">
          <span>Откуда выезд?</span>
          <button data-target="endPointMap" class="waves-effect waves-light btn modal-trigger">Указать на карте</button>
        </div>
        <div class="input-field">
          <select class="icons" formControlName="travelTarget">
            <option value="" disabled selected>Цель поездки</option>
            <option class="left">Охота</option>
            <option class="left">Рыбалка</option>
            <option class="left">Туризм</option>
          </select>
        </div>
        <div class="input-field col s6">
          <input id="peoplesCount" formControlName="peoplesCount" type="number" min="1" class="validate"/>
          <label for="peoplesCount">Количество человек</label>
          <span class="helper-text red-text" *ngIf="f.peoplesCount.touched && f.peoplesCount.invalid">
            <small *ngIf="f.peoplesCount.hasError('required')">Поле не должно быть пустым</small>
        </span>
        </div>
        <div class="input-field col s6">
          <input id="costPerPeople" formControlName="costPerPeople" type="number" min="0" class="validate"/>
          <label for="costPerPeople">Цена за 1 чел.</label>
          <span class="helper-text red-text" *ngIf="f.costPerPeople.touched && f.costPerPeople.invalid">
            <small *ngIf="f.costPerPeople.hasError('required')">Поле не должно быть пустым</small>
        </span>
        </div>
        <div class="input-field col s12">
          <textarea id="description" cols="30" rows="10" formControlName="description"></textarea>
          <label for="description">Подробное описание</label>
          <span class="helper-text red-text" *ngIf="f.description.touched && f.description.invalid">
            <small *ngIf="f.description.hasError('required')">Поле не должно быть пустым</small>
        </span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" id="button-modal-close" class="btn">Создать</button>
        <button type="button" class="btn ml10" (click)="closeModal()">Отмена</button>

      </div>
    </form>
  </div>
</div>

<div id="startPointMap" class="modal">
  <div class="modal-content">
    <div class="mapContainer">
      <ya-map [center]="[55.751952, 37.600739]" [zoom]="10" (ready)="onStartPointMapReady($event)">
        <ya-placemark
          *ngFor="let placemark of placemarksStart"
          [geometry]="placemark?.geometry"
          [options]="placemark?.options"
        ></ya-placemark>
      </ya-map>
    </div>
  </div>
  <div class="modal-footer">
    <button class="modal-close waves-effect waves-green btn-flat">Подтвердить</button>
  </div>
</div>

<div id="endPointMap" class="modal">
  <div class="modal-content">
    <div class="mapContainer">
      <ya-map [center]="[55.751952, 37.600739]" [zoom]="10" (ready)="onEndPointMapReady($event)"></ya-map>
    </div>
  </div>
  <div class="modal-footer">
    <button class="modal-close waves-effect waves-green btn-flat">Подтвердить</button>
  </div>
</div>



<div id="editTravel" class="modal">
  <div class="mat-form-field-flex">
    <form [formGroup]="form" (ngSubmit)="onSubmit('update')">
      <div class="modal-content">
        <!--        <div class="input-field col s6">-->
        <!--          <input id="travelTitle" disabled [value]="-->
        <!--          form.controls.travelTarget.value === 'tourism' ? 'Туризм' :-->
        <!--          form.controls.travelTarget.value === 'fishing' ? 'Рыбалка' :-->
        <!--          form.controls.travelTarget.value === 'hunting' ? 'Охота' : ''-->
        <!--        " type="text" class="validate" placeholder="Выберите для чего вы хотите отправиться"/>-->
        <!--        </div>-->
        <div>
          <strong>{{form.controls.travelDate.value | date:'dd.MM.yyyy'}}</strong>
          <button (click)="datepicker.click()" class="waves-effect waves-light btn" type="button">Дата поездки</button>
          <div class="rescheduleBlock">
            <button class="waves-effect waves-light btn" type="button" (click)="rescheduleForTwoWeeks()">Перенести на 2 недели</button>
            <button class="waves-effect waves-light btn" type="button" (click)="rescheduleMonth()">Перенести на месяц</button>
          </div>
        </div>
        <div>
          <span class="addPhoto">Добавить обложку поездки</span>
          <input (change)="onFileLoad($event)" type="file" [hidden]="true" #inputFile>
          <button class="waves-effect waves-light btn" type="button" (click)="inputFile.click()">Выбрать изображение
          </button>
        </div>
        <div class="input-field">
          <select formControlName="travelType" class="icons" (change)="travelTypeChange()">
            <option value="" disabled selected>Выбрать технику</option>
            <option value="onFoot" class="left">Нет</option>
            <option value="technique" class="left">Выбрать</option>
          </select>
        </div>
        <div *ngIf="isTechnique" class="input-field col s12 m6">
          <select class="browser-default" formControlName="travelTechnique" multiple>
            <!--            <option value="" disabled selected>Выберите технику</option>-->
            <option *ngFor="let transport of transports" value="{{transport.name }}">{{transport.name}}</option>
          </select>
        </div>
        <div class="buttonBlock">
          <span>Куда поехать?</span>
          <button data-target="startPointMap" class="waves-effect waves-light btn modal-trigger">Указать на карте
          </button>
        </div>
        <div class="buttonBlock">
          <span>Откуда выезд?</span>
          <button data-target="endPointMap" class="waves-effect waves-light btn modal-trigger">Указать на карте</button>
        </div>
        <div class="input-field">
          <select class="icons" formControlName="travelTarget">
            <option value="" disabled selected>Цель поездки</option>
            <option class="left">Охота</option>
            <option class="left">Рыбалка</option>
            <option class="left">Туризм</option>
          </select>
        </div>
        <div class="input-field col s6">
          <input formControlName="peoplesCount" type="number" placeholder="Количество человек"  min="1" class="validate"/>
<!--          <label for="peoplesCount">Количество человек</label>-->
          <span class="helper-text red-text" *ngIf="f.peoplesCount.touched && f.peoplesCount.invalid">
            <small *ngIf="f.peoplesCount.hasError('required')">Поле не должно быть пустым</small>
        </span>
        </div>
        <div class="input-field col s6">
          <input formControlName="costPerPeople" type="number" placeholder="Цена за 1 чел." min="0" class="validate"/>
<!--          <label for="costPerPeople">Цена за 1 чел.</label>-->
          <span class="helper-text red-text" *ngIf="f.costPerPeople.touched && f.costPerPeople.invalid">
            <small *ngIf="f.costPerPeople.hasError('required')">Поле не должно быть пустым</small>
        </span>
        </div>
        <div class="input-field col s12">
          <textarea cols="30" rows="10" placeholder="Подробное описание" formControlName="description"></textarea>
<!--          <label for="description">Подробное описание</label>-->
          <span class="helper-text red-text" *ngIf="f.description.touched && f.description.invalid">
            <small *ngIf="f.description.hasError('required')">Поле не должно быть пустым</small>
        </span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" id="button-edit-modal-close" class="btn">Обновить</button>
        <button type="button" class="btn ml10" (click)="closeEditModal()">Отмена</button>
      </div>
    </form>
  </div>
</div>
