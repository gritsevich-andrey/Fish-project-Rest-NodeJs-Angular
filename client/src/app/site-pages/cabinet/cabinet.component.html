<div class="cab-container">
  <mat-tab-group mat-align-tabs="end">
    <mat-tab label="Профиль">
      <div class="card-cabinet">
        <form
          [formGroup]="form"
          (ngSubmit)="onSubmit()"
          (mouseover)="changeBorderStyle()"
        >
          <div class="input-field">
            <div class="image-preview"
                 *ngIf="imagePreview !== '' && imagePreview !== null"
            >
              <img [src]="imagePreview" [alt]="form.value.title">
            </div>
            <i class="material-icons" (click)="fileAvatar.click()" matTooltip="Добавить аватар">add_a_photo</i>
            <input [hidden]="hide" type="file" (change)="onImageLoad($event)" #fileAvatar
            />
          </div>
          <div class="input-field">
            <input placeholder="ФИО" id="fio" type="text"
                   formControlName="fio"
                   [ngClass]="{invalid: f.fio.touched && f.fio.invalid}"
            >
            <span class="helper-text red-text"
                  *ngIf="f.fio.touched && f.fio.invalid">
       <small *ngIf="f.fio.hasError('required')">Поле не должно быть пустым</small>
      </span>
          </div>
          <div class="input-field">
            <span>Пол:</span>
            <p>
              <label>
                <input name="gender" formControlName="gender" value="Мужской" type="radio" checked/>
                <span>Мужской</span>
              </label>
            </p>
            <p>
              <label>
                <input name="gender" formControlName="gender" value="Женский" type="radio"/>
                <span>Женский</span>
              </label>
            </p>
          </div>

          <div class="input-field">
            <span>Возраст:</span>
            <p><label>
              <input placeholder="Возраст" id="age" type="text"
                     formControlName="age"
              >
            </label>
            </p>
          </div>
          <div class="input-field">
            <span>Техника и права:</span>
            <div formArrayName="technique" *ngFor="let technique of techList.controls; let i = index;">
              <div [formGroupName]="i">
                <input type="text" placeholder="Название техники" formControlName="name"
                       matTooltip="Указать технику, на которой оказываются услуги">
                <input type="text" placeholder="Права на управление" formControlName="license"
                       matTooltip="Указать категорию прав на управление">
                <div class="form-group">
                  <i #addTech class="material-icons" (click)="addTechnique()" matTooltip="Добавить технику">add_box</i>
                  <i class="material-icons" (click)="removeTechnique(i)" matTooltip="Удалить технику">remove_box</i>
                </div>
              </div>
            </div>
          </div>

          <div class="input-field">
            <p>
              <label>
                <input name="juridicalPerson" formControlName="juridicalPerson" value="Физическое лицо" type="radio"
                       checked/>
                <span>Физическое лицо</span>
              </label>
            </p>
            <p>
              <label>
                <input name="juridicalPerson" formControlName="juridicalPerson" value="Юридическое лицо" type="radio"/>
                <span>Юридическое лицо</span>
              </label>
            </p>
          </div>
          <button mat-mini-fab type="submit" matTooltip="Сохранить изменения"
                  [@borderForm]="borderState"
          >
            <mat-icon>send</mat-icon>
          </button>
        </form>
      </div>
    </mat-tab>
    <mat-tab label="Рейтинг и отзывы">
      <div class="card-cabinet">
        <form [formGroup]="formRating">
          <div class="cont">
            <span>Рейтинг в группах</span>
            <div class="stars">
              <ngx-star-rating formControlName="rating1" [id]="'rating'"></ngx-star-rating>
            </div>
            <div>Рейтинг: {{formRating.value.rating1}}</div>
          </div>

          <div class="cont">
            <span>Рейтинг в услугах</span>
            <div class="stars">
              <ngx-star-rating formControlName="rating2" [id]="'rating2'" [disabled]="true"></ngx-star-rating>
            </div>
            <div>Рейтинг с блокировкой: {{formRating.value.rating2}}</div>
          </div>
        </form>


        <div class="cont">
          <span>Общий рейтинг</span>
          <div class="stars">
            <ngx-star-rating [(ngModel)]="rating3" [id]="'rating3'"></ngx-star-rating>
          </div>
          <div>Рейтинг: {{ rating3 }}</div>
        </div>
        <button class="btn">Мои отзывы</button>
      </div>
    </mat-tab>
    <mat-tab label="Мои фото">
      <div>
        <table matSort (matSortChange)="sortService.sortData($event)">
          <thead>
          <tr>
            <th mat-sort-header="number">№</th>
            <th mat-sort-header="image">Изображение</th>
            <th mat-sort-header="description">Описание</th>
            <th mat-sort-header="moderation">Модерация</th>
            <th mat-sort-header="public">Опубликован</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let photo of userPhotos | paginate: {
              itemsPerPage: pageSize,
              currentPage: page
            }; let i = index;">
            <td>{{i + 1}}</td>
            <td class="image-preview"><img [src]="photo.imageSrc"></td>
            <td>{{photo.description}}</td>
            <td>{{photo.moderation}}</td>
            <td>{{photo.public}}</td>
          </tr>
          </tbody>
        </table>
        <span class="mt10"><button class="btn btn-dark" (click)="handlePageChange()">Загрузить еще</button></span>
      </div>
      <pagination-controls
        previousLabel="Назад"
        nextLabel="Вперед"
        (pageChange)="page = $event"
      ></pagination-controls>
    </mat-tab>
  </mat-tab-group>

</div>
